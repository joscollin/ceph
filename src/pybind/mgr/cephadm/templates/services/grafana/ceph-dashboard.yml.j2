# {{ cephadm_managed }}
deleteDatasources:
{% for host in hosts %}
  - name: 'Dashboard{{ loop.index }}'
    orgId: 1
{% endfor %}
{% for loki_host in loki_hosts %}
  - name: 'Loki{{ loop.index }}'
    orgId: 1
{% endfor %}

datasources:
{% for host in hosts %}
  - name: 'Dashboard{{ loop.index }}'
    type: 'prometheus'
    access: 'proxy'
    orgId: 1
    url: '{{ host }}'
    basicAuth: false
    isDefault: {{ 'true' if loop.first else 'false' }}
    editable: false
{% endfor %}

  - name: 'Loki'
    type: 'loki'
    access: 'proxy'
    orgId: 1
    url: '{{ loki_hosts[0] }}'
    basicAuth: false
    isDefault: true
    editable: false
